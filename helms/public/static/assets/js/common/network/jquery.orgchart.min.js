"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});if("undefined"!=typeof MutationObserver){var o=new MutationObserver(function(e){o.disconnect();e:for(var t=0;t<e.length;t++)for(var n=0;n<e[t].addedNodes.length;n++)if(e[t].addedNodes[n].classList.contains("orgchart")&&i.options.initCompleted&&"function"==typeof i.options.initCompleted){i.options.initCompleted(a),a.triggerHandler({type:"init.orgchart"});break e}});o.observe(n[0],{childList:!0})}if("object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length){var d=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),i.export()}});n.append(d)}return this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(n=parseInt(o[4]),s=parseInt(o[5])):(n=parseInt(o[12]),s=parseInt(o[13]))}var d=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)d=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else d=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-d,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-d,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(o=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(n.id=t[0].id),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){return void 0===this.$chart?"Error: orgchart does not exist":this.$chart.find(".node").length?this.$chart.find(".node")[0].id?this.loopChart(this.$chart):"Error: Nodes of orghcart to be exported must have id attribute!":"Error: nodes do not exist"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return-1===i[0].className.indexOf("slide-")?{exist:!0,visible:!0}:{exist:!0,visible:!1};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},hideChildrenEnd:function(e){e.data.visibleNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.visibleNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},hideChildren:function(t){var i=this,n=t.closest("tr").siblings();this.stopAjax(n.last());var s=n.last().find(".node").filter(function(){return i.getNodeState(e(this)).visible}),a=!!n.last().is(".verticalNodes");a||s.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),s.addClass("sliding slide-up").eq(0).one("transitionend",{visibleNodes:s,lowerLevel:n,isVerticalDesc:a,node:t},this.hideChildrenEnd.bind(this))},showChildren:function(e){var t=this,i=e.closest("tr").siblings(),n=!!i.is(".verticalNodes")?i.removeClass("hidden").find(".node:visible"):i.removeClass("hidden").eq(2).children().find(".node:first");this.repaint(n.get(0)),n.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){n.removeClass("sliding"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblings:function(e,t){var i=this,n=e.closest("table").parent();n.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?n.prevAll().find(".node:visible").addClass("sliding slide-right"):n.nextAll().find(".node:visible").addClass("sliding slide-left"):(n.prevAll().find(".node:visible").addClass("sliding slide-right"),n.nextAll().find(".node:visible").addClass("sliding slide-left"));var s=n.siblings().find(".sliding"),a=s.closest(".nodes").prevAll(".lines").css("visibility","hidden");s.eq(0).one("transitionend",function(){a.removeAttr("style");var o=t?"left"===t?n.prevAll(":not(.hidden)"):n.nextAll(":not(.hidden)"):n.siblings();n.closest(".nodes").prev().children(":not(.hidden)").slice(1,t?2*o.length+1:-1).addClass("hidden"),s.removeClass("sliding"),o.find(".node:visible:gt(0)").removeClass("slide-left slide-right").addClass("slide-up").end().find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),i.isInAction(e)&&i.switchHorizontalArrow(e)})},showSiblings:function(t,i){var n=this,s=e();s=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var a=t.closest("table").closest("tr").siblings();if(i?a.eq(2).children(".hidden").slice(0,2*s.length).removeClass("hidden"):a.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){a.removeClass("hidden");var o=a.find(".node")[0];this.repaint(o),e(o).addClass("sliding").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("sliding")})}s.find(".node:visible").addClass("sliding").removeClass("slide-left slide-right").eq(-1).one("transitionend",function(){s.find(".node:visible").removeClass("sliding"),n.isInAction(t)&&(n.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})},startLoading:function(t,i,n){var s=i.closest(".orgchart");return(void 0===s.data("inAjax")||!0!==s.data("inAjax"))&&(t.addClass("hidden"),i.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),i.children().not(".spinner").css("opacity",.2),s.data("inAjax",!0),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t,i,n){var s=i.closest("div.orgchart");t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),s.data("inAjax",!1),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},createNode:function(n,s,a){var o=this;n.children||(n.children=[]),e.each(n.children,function(e,t){t.parentId=n.id});var d=e.Deferred(),r=e("<div"+(a.draggable?' draggable="true"':"")+(n[a.nodeId]?' id="'+n[a.nodeId]+'"':"")+(n.parentId?' data-parent="'+n.parentId+'"':"")+">").addClass("node "+(n.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?r.append(a.nodeTemplate(n)):r.append('<div class="title">'+n[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(n[a.nodeContent]||"")+"</div>":"");var l=n.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var c=s+1>=a.depth?"plus":"minus";r.append('<i class="toggleBtn fa fa-'+c+'-square"></i>')}}else Number(l.substr(0,1))&&r.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&r.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&r.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return r.on("mouseenter mouseleave",function(t){var i=e(this),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=o.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=o.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&o.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),r.on("click",function(t){e(this).closest(".orgchart").find(".focused").removeClass("focused"),e(this).addClass("focused")}),r.on("click",".topEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"parent");if(d.exist){var r=s.closest("table").closest("tr").siblings(":first").find(".node");if(r.is(".sliding"))return;d.visible?(o.hideParent(s),r.one("transitionend",function(){o.isInAction(s)&&(o.switchVerticalArrow(i),o.switchHorizontalArrow(s))})):o.showParent(s)}else{var l=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.parent)?a.ajaxURL.parent(n):a.ajaxURL.parent+l,dataType:"json"}).done(function(t){s.closest(".orgchart").data("inAjax")&&(e.isEmptyObject(t)||o.addParent(s,t,a))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){o.endLoading(i,s,a)})}}),r.on("click",".bottomEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"children");if(d.exist){if(s.closest("tr").siblings(":last").find(".node:visible").is(".sliding"))return;d.visible?o.hideChildren(s):o.showChildren(s)}else{var r=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(n):a.ajaxURL.children+r,dataType:"json"}).done(function(t,i,n){s.closest(".orgchart").data("inAjax")&&t.children.length&&o.addChildren(s,t,e.extend({},a,{depth:0}))}).fail(function(e,t,i){console.log("Failed to get children nodes data")}).always(function(){o.endLoading(i,s,a)})}}),r.on("click",".toggleBtn",function(t){var i=e(this),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),o.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("sliding")})):(s.addClass("sliding slide-up").eq(0).one("transitionend",function(){s.removeClass("sliding"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),r.on("click",".leftEdge, .rightEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),d=o.getNodeState(s,"siblings");if(d.exist){if(s.closest("table").parent().siblings().find(".node:visible").is(".sliding"))return;if(a.toggleSiblingsResp){var r=s.closest("table").parent().prev(),l=s.closest("table").parent().next();i.is(".leftEdge")?r.is(".hidden")?o.showSiblings(s,"left"):o.hideSiblings(s,"left"):l.is(".hidden")?o.showSiblings(s,"right"):o.hideSiblings(s,"right")}else d.visible?o.hideSiblings(s):o.showSiblings(s)}else{var c=i.parent()[0].id,h=o.getNodeState(s,"parent").exist?e.isFunction(a.ajaxURL.siblings)?a.ajaxURL.siblings(n):a.ajaxURL.siblings+c:e.isFunction(a.ajaxURL.families)?a.ajaxURL.families(n):a.ajaxURL.families+c;o.startLoading(i,s,a)&&e.ajax({url:h,dataType:"json"}).done(function(e,t,i){s.closest(".orgchart").data("inAjax")&&(e.siblings||e.children)&&o.addSiblings(s,e,a)}).fail(function(e,t,i){console.log("Failed to get sibling nodes data")}).always(function(){o.endLoading(i,s,a)})}}),a.draggable&&r.on("dragstart",function(n){var s=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());if(o&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==r.closest(".orgchart").css("transform")){var d,l;i.querySelector(".ghost-node")?(d=r.closest(".orgchart").children(".ghost-node").get(0),l=e(d).children().get(0)):((d=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(l),r.closest(".orgchart").append(d));var c=r.closest(".orgchart").css("transform").split(","),h=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?c[0].slice(c[0].indexOf("(")+1):c[1]));d.setAttribute("width",r.outerWidth(!1)),d.setAttribute("height",r.outerHeight(!1)),l.setAttribute("x",5*h),l.setAttribute("y",5*h),l.setAttribute("width",120*h),l.setAttribute("height",40*h),l.setAttribute("rx",4*h),l.setAttribute("ry",4*h),l.setAttribute("stroke-width",1*h);var g=s.offsetX*h,f=s.offsetY*h;if("l2r"===a.direction?(g=s.offsetY*h,f=s.offsetX*h):"r2l"===a.direction?(g=r.outerWidth(!1)-s.offsetY*h,f=s.offsetX*h):"b2t"===a.direction&&(g=r.outerWidth(!1)-s.offsetX*h,f=r.outerHeight(!1)-s.offsetY*h),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var p=i.createElement("img");p.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(d),s.dataTransfer.setDragImage(p,g,f)}else s.dataTransfer.setDragImage(d,g,f)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,i){-1===b.index(i)&&(a.dropCriteria?a.dropCriteria(v,u,e(i))&&e(i).addClass("allowedDrop"):e(i).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var i=e(this),n=i.closest(".orgchart"),s=n.data("dragged"),a=s.closest(".nodes").siblings().eq(0).children(),o=e.Event("nodedrop.orgchart");if(n.trigger(o,{draggedNode:s,dragZone:a.children(),dropZone:i}),!o.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),s.find(".horizontalEdge").length||s.append(r),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var l=s.closest("table").parent().siblings().find(".node:first");1===l.length&&l.append(r)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var c=parseInt(a.attr("colspan"));if(c>2){a.attr("colspan",c-2).parent().next().children().attr("colspan",c-2).end().next().children().slice(1,3).remove();var h=a.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}}),a.createNode&&a.createNode(r,n),d.resolve(r),d.promise()},buildHierarchy:function(t,i,n,s,a){var o,d=this,r=i.children,l=!!r&&r.length,c=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(o=c?t:e("<table>"),c||t.append(o),e.when(this.createNode(i,n,s)).done(function(e){c?o.append(e):o.append(e.wrap("<tr><td"+(l?' colspan="'+2*r.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(o=t);var h=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||o.append('<tr class="lines'+h+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var f='<tr class="lines'+h+'"><td class="rightLine">&nbsp;</td>',p=1;p<r.length;p++)f+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';f+='<td class="leftLine">&nbsp;</td></tr>';var v;g?(v=e("<ul>"),h&&v.addClass(h),n+2===s.verticalDepth?o.append('<tr class="verticalNodes'+h+'"><td></td></tr>').find(".verticalNodes").children().append(v):o.append(v)):(v=e('<tr class="nodes'+h+'">'),o.append(f).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),d.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,o=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(e){o.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),o=i.siblings?i.siblings.length:i.children.length,d=t.parent().is("td")?t.closest("tr").children().length:1,r=d+o,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var c=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++c===o){var e=t.parent().closest("table").children("tr:last").children("td");d>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,d),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var h=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++h===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,d=o.find(".mask");d.length?d.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=o.addClass("canvasContainer").find(".orgchart:visible").get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find(".orgchart:visible:first").css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var d={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(d=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),d.save(n+".pdf")}else{var c="WebkitAppearance"in i.documentElement.style,h=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!c&&!h||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var f=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(f).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),o.find(f).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm1vIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsImluaXRUaW1lIiwiaSIsImoiLCJhZGRlZE5vZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbml0Q29tcGxldGVkIiwidHJpZ2dlckhhbmRsZXIiLCJ0eXBlIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImJ1aWxkSGllcmFyY2h5IiwiYnVpbGRKc29uRFMiLCJjaGlsZHJlbiIsImFqYXhVUkwiLCJhdHRhY2hSZWwiLCJhcHBlbmQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZmFpbCIsImVycm9yVGhyb3duIiwiY29uc29sZSIsImxvZyIsImFsd2F5cyIsIiRleHBvcnRCdG4iLCJ0ZXh0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZXhwb3J0IiwiYmluZFBhbiIsImJpbmRab29tIiwic2V0T3B0aW9ucyIsInZhbCIsInVuYmluZFBhbiIsInVuYmluZFpvb20iLCJwYW5TdGFydEhhbmRsZXIiLCJkZWxlZ2F0ZVRhcmdldCIsInRvdWNoZXMiLCJjc3MiLCJsYXN0WCIsImxhc3RZIiwibGFzdFRmIiwidGVtcCIsInNwbGl0IiwiaW5kZXhPZiIsInBhcnNlSW50Iiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0VG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJvbiIsIm5ld1giLCJuZXdZIiwibWF0cml4Iiwiam9pbiIsInBhbkVuZEhhbmRsZXIiLCJjaGFydCIsIm9mZiIsInpvb21XaGVlbEhhbmRsZXIiLCJvYyIsIm5ld1NjYWxlIiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsInNldENoYXJ0U2NhbGUiLCJ6b29tU3RhcnRIYW5kbGVyIiwiZGlzdCIsImdldFBpbmNoRGlzdCIsInpvb21pbmdIYW5kbGVyIiwiem9vbUVuZEhhbmRsZXIiLCJkaWZmIiwiTWF0aCIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldFNjYWxlIiwiYWJzIiwicGFyc2VGbG9hdCIsIiRsaSIsInN1Yk9iaiIsIm5hbWUiLCJjb250ZW50cyIsImVxIiwidHJpbSIsInJlbGF0aW9uc2hpcCIsInBhcmVudCIsImlzIiwic2libGluZ3MiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsImdldE5vZGVTdGF0ZSIsIiRub2RlIiwicmVsYXRpb24iLCIkdGFyZ2V0IiwiZXhpc3QiLCJ2aXNpYmxlIiwiY2xhc3NOYW1lIiwiZ2V0UmVsYXRlZE5vZGVzIiwiaGlkZVBhcmVudEVuZCIsInVwcGVyTGV2ZWwiLCJhZGRDbGFzcyIsInNsaWNlIiwicmVtb3ZlQXR0ciIsImhpZGVQYXJlbnQiLCIkdXBwZXJMZXZlbCIsImhpZGVTaWJsaW5ncyIsIiRwYXJlbnQiLCJvbmUiLCJzaG93UGFyZW50RW5kIiwibm9kZSIsImlzSW5BY3Rpb24iLCJzd2l0Y2hWZXJ0aWNhbEFycm93Iiwic2hvd1BhcmVudCIsInJlcGFpbnQiLCJiaW5kIiwiaGlkZUNoaWxkcmVuRW5kIiwidmlzaWJsZU5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImxhc3QiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJoaWRlQ2hpbGRyZW4iLCIkbG93ZXJMZXZlbCIsIiR2aXNpYmxlTm9kZXMiLCJmaWx0ZXIiLCJzaG93Q2hpbGRyZW4iLCIkbGV2ZWxzIiwiJGRlc2NlbmRhbnRzIiwiZ2V0IiwiJG5vZGVDb250YWluZXIiLCJuZXh0QWxsIiwiJGFuaW1hdGVkTm9kZXMiLCIkbGluZXMiLCIkc2libGluZ3MiLCJwcmV2IiwiZW5kIiwic3dpdGNoSG9yaXpvbnRhbEFycm93Iiwic2hvd1NpYmxpbmdzIiwic3RhcnRMb2FkaW5nIiwiJGFycm93Iiwibm90IiwicHJvcCIsImVuZExvYWRpbmciLCJhdHRyIiwidG9nZ2xlQ2xhc3MiLCIkcHJldlNpYiIsIiRuZXh0U2liIiwibmV4dCIsIiRzaWJzIiwic2lic1Zpc2libGUiLCJzdHlsZSIsIm9mZnNldFdpZHRoIiwiY3JlYXRlTm9kZSIsIm5vZGVEYXRhIiwibGV2ZWwiLCJpbmRleCIsImNoaWxkIiwicGFyZW50SWQiLCJkdGQiLCJEZWZlcnJlZCIsIiRub2RlRGl2Iiwibm9kZVRlbXBsYXRlIiwibm9kZUNvbnRlbnQiLCJ2ZXJ0aWNhbERlcHRoIiwiTnVtYmVyIiwic3Vic3RyIiwiaWNvbiIsInByZXBlbmQiLCJmbGFnIiwiJHRvcEVkZ2UiLCIkYm90dG9tRWRnZSIsIiRsZWZ0RWRnZSIsInN0b3BQcm9wYWdhdGlvbiIsIiR0aGF0IiwicGFyZW50U3RhdGUiLCJpc0Z1bmN0aW9uIiwiaXNFbXB0eU9iamVjdCIsImFkZFBhcmVudCIsImNoaWxkcmVuU3RhdGUiLCJhZGRDaGlsZHJlbiIsIiR0aGlzIiwiJGRlc2NXcmFwcGVyIiwiJGNoaWxkcmVuIiwic2libGluZ3NTdGF0ZSIsImZhbWlsaWVzIiwiYWRkU2libGluZ3MiLCJvcmlnRXZlbnQiLCJpc0ZpcmVmb3giLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZ2hvc3ROb2RlIiwibm9kZUNvdmVyIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnROUyIsImFkZCIsImFwcGVuZENoaWxkIiwidHJhbnNWYWx1ZXMiLCJzY2FsZSIsInNldEF0dHJpYnV0ZSIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsInhPZmZzZXQiLCJvZmZzZXRYIiwieU9mZnNldCIsIm9mZnNldFkiLCJnaG9zdE5vZGVXcmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInNldERyYWdJbWFnZSIsIiRkcmFnZ2VkIiwiJGRyYWdab25lIiwiJGRyYWdIaWVyIiwiZHJvcENyaXRlcmlhIiwiZHJvcEVmZmVjdCIsIiRkcm9wWm9uZSIsIiRvcmdjaGFydCIsImRyb3BFdmVudCIsIkV2ZW50IiwidHJpZ2dlciIsImRyYWdnZWROb2RlIiwiZHJhZ1pvbmUiLCJkcm9wWm9uZSIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRyb3BDb2xzcGFuIiwiaG9yaXpvbnRhbEVkZ2VzIiwiYWRkQmFjayIsImJlZm9yZSIsIiRkcm9wU2licyIsImFmdGVyIiwiZHJhZ0NvbHNwYW4iLCIkZHJhZ1NpYnMiLCJyZXNvbHZlIiwicHJvbWlzZSIsIiRhcHBlbmRUbyIsImNhbGxiYWNrIiwiJG5vZGVXcmFwcGVyIiwiJGNoaWxkTm9kZXMiLCJoYXNDaGlsZHJlbiIsImlzVmVydGljYWxOb2RlIiwiT2JqZWN0Iiwia2V5cyIsIndoZW4iLCJ3cmFwIiwiaXNIaWRkZW4iLCJjb2xsYXBzZWQiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCIkbm9kZUxheWVyIiwiJG5vZGVDZWxsIiwiYnVpbGRDaGlsZE5vZGUiLCJjb3VudCIsImJ1aWxkUGFyZW50Tm9kZSIsIiRjdXJyZW50Um9vdCIsIiR0YWJsZSIsImNvbXBsZW1lbnRMaW5lIiwiJG9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwibGluZXMiLCJidWlsZFNpYmxpbmdOb2RlIiwiJG5vZGVDaGFydCIsIm5ld1NpYmxpbmdDb3VudCIsImluc2VydFBvc3Rpb24iLCJmbG9vciIsImNoaWxkQ291bnQiLCIkc2libGluZ1RkcyIsInVud3JhcCIsIm5vZGVDb3VudCIsInJlbW92ZU5vZGVzIiwiJG1hc2siLCJzb3VyY2VDaGFydCIsImh0bWwyY2FudmFzIiwid2lkdGgiLCJjbGllbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsIm9uY2xvbmUiLCJjbG9uZURvYyIsIm9ucmVuZGVyZWQiLCJjYW52YXMiLCJkb2MiLCJkb2NXaWR0aCIsImRvY0hlaWdodCIsImpzUERGIiwiYWRkSW1hZ2UiLCJ0b0RhdGFVUkwiLCJzYXZlIiwiaXNXZWJraXQiLCJkb2N1bWVudEVsZW1lbnQiLCJpc0ZmIiwic2lkZWJhciIsImlzRWRnZSIsImFwcE5hbWUiLCJhcHBWZXJzaW9uIiwibXNTYXZlQmxvYiIsIm1zVG9CbG9iIiwic2VsZWN0b3IiLCJ0aGVuIiwiZm4iLCJvcmdjaGFydCJdLCJtYXBwaW5ncyI6IkFBVUEsY0FFQyxTQUFVQSxHQUNhLGlCQUFYQyxRQUFpRCxpQkFBbkJBLE9BQU9DLFFBQzlDRixFQUFRRyxRQUFRLFVBQVdDLE9BQVFDLFVBRW5DTCxFQUFRTSxPQUFRRixPQUFRQyxVQUo1QixDQU1FLFNBQVVFLEVBQUdILEVBQVFDLEVBQVVHLEdBQy9CLElBQUlDLEVBQVcsU0FBVUMsRUFBTUMsR0FDN0JDLEtBQUtDLGdCQUFrQk4sRUFBRUcsR0FDekJFLEtBQUtELEtBQU9BLEVBQ1pDLEtBQUtFLGdCQUNIQyxVQUFhLE9BQ2JDLE9BQVUs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Q0RoQyxFQUFnQmdDLFlBQVksdUJBS2xDdEMsRUFBRXdXLEdBQUdDLFNBQVcsU0FBVXJXLEdBQ3hCLE9BQU8sSUFBSUYsRUFBU0csS0FBTUQsR0FBTW9CIiwiZmlsZSI6ImpxdWVyeS5vcmdjaGFydC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogalF1ZXJ5IE9yZ0NoYXJ0IFBsdWdpblxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZy9PcmdDaGFydFxuICpcbiAqIENvcHlyaWdodCAyMDE2LCBkYWJlbmdcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmdcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfVxufShmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG4gIHZhciBPcmdDaGFydCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRzKSB7XG4gICAgdGhpcy4kY2hhcnRDb250YWluZXIgPSAkKGVsZW0pO1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICdub2RlVGl0bGUnOiAnbmFtZScsXG4gICAgICAnbm9kZUlkJzogJ2lkJyxcbiAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcbiAgICAgICdkZXB0aCc6IDk5OSxcbiAgICAgICdjaGFydENsYXNzJzogJycsXG4gICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXG4gICAgICAnZXhwb3J0RmlsZW5hbWUnOiAnT3JnQ2hhcnQnLFxuICAgICAgJ2V4cG9ydEZpbGVleHRlbnNpb24nOiAncG5nJyxcbiAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICdkcmFnZ2FibGUnOiBmYWxzZSxcbiAgICAgICdkaXJlY3Rpb24nOiAndDJiJyxcbiAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICd6b29tJzogZmFsc2UsXG4gICAgICAnem9vbWluTGltaXQnOiA3LFxuICAgICAgJ3pvb21vdXRMaW1pdCc6IDAuNVxuICAgIH07XG4gIH07XG4gIC8vXG4gIE9yZ0NoYXJ0LnByb3RvdHlwZSA9IHtcbiAgICAvL1xuICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgdGhpcy5vcHRzLCBvcHRzKTtcbiAgICAgIC8vIGJ1aWxkIHRoZSBvcmctY2hhcnRcbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIGlmICh0aGlzLiRjaGFydCkge1xuICAgICAgICB0aGlzLiRjaGFydC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gdGhpcy5vcHRpb25zLmRhdGE7XG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQgPSAkKCc8ZGl2PicsIHtcbiAgICAgICAgJ2RhdGEnOiB7ICdvcHRpb25zJzogdGhpcy5vcHRpb25zIH0sXG4gICAgICAgICdjbGFzcyc6ICdvcmdjaGFydCcgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiAhPT0gJ3QyYicgPyAnICcgKyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uIDogJycpLFxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkY2hhcnQuZmluZCgnLm5vZGUuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICBpbml0VGltZTpcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBpZiAobXV0YXRpb25zW2ldLmFkZGVkTm9kZXNbal0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcmdjaGFydCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkICYmIHR5cGVvZiB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQoJGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICRjaGFydC50cmlnZ2VySGFuZGxlcih7ICd0eXBlJzogJ2luaXQub3JnY2hhcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgaW5pdFRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIG1vLm9ic2VydmUoJGNoYXJ0Q29udGFpbmVyWzBdLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgkLnR5cGUoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgJCkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMuYnVpbGRKc29uRFMoZGF0YS5jaGlsZHJlbigpKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gbG9jYWwganNvbiBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoaXMuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAndXJsJzogZGF0YSxcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhhdC5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhhdC5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoYXQub3B0aW9ucyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAkY2hhcnQuY2hpbGRyZW4oJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkY2hhcnQpO1xuXG4gICAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b25cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwb3J0QnV0dG9uICYmICEkY2hhcnRDb250YWluZXIuZmluZCgnLm9jLWV4cG9ydC1idG4nKS5sZW5ndGgpIHtcbiAgICAgICAgdmFyICRleHBvcnRCdG4gPSAkKCc8YnV0dG9uPicsIHtcbiAgICAgICAgICAnY2xhc3MnOiAnb2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyksXG4gICAgICAgICAgJ3RleHQnOiAnRXhwb3J0JyxcbiAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGF0LmV4cG9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGV4cG9ydEJ0bik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFuKSB7XG4gICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnpvb20pIHtcbiAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0T3B0aW9uczogZnVuY3Rpb24gKG9wdHMsIHZhbCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAob3B0cyA9PT0gJ3BhbicpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRQYW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMgPT09ICd6b29tJykge1xuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChvcHRzLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmluaXQob3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnBhbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnBhbikge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy56b29tICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKG9wdHMuem9vbSkge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhblN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkKGUuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoIHx8IChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICAgICRjaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuY3NzKCdjdXJzb3InLCAnbW92ZScpLmRhdGEoJ3Bhbm5pbmcnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHZhciBsYXN0WCA9IDA7XG4gICAgICB2YXIgbGFzdFkgPSAwO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHZhciB0ZW1wID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbNF0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFs1XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzEyXSk7XG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzEzXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBzdGFydFggPSAwO1xuICAgICAgdmFyIHN0YXJ0WSA9IDA7XG4gICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgc3RhcnRYID0gZS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnBhZ2VZIC0gbGFzdFk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgICAgc3RhcnRYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gbGFzdFg7XG4gICAgICAgIHN0YXJ0WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAkY2hhcnQub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCEkY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdYID0gMDtcbiAgICAgICAgdmFyIG5ld1kgPSAwO1xuICAgICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgICBuZXdYID0gZS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgICAgbmV3WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gc3RhcnRZO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnLCAwLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgbWF0cml4WzRdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFs1XSA9ICcgJyArIG5ld1kgKyAnKSc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdHJpeFsxMl0gPSAnICcgKyBuZXdYO1xuICAgICAgICAgICAgbWF0cml4WzEzXSA9ICcgJyArIG5ld1k7XG4gICAgICAgICAgfVxuICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIG1hdHJpeC5qb2luKCcsJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcGFuRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgIGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpLmNzcygnY3Vyc29yJywgJ2RlZmF1bHQnKS5vZmYoJ21vdXNlbW92ZScpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBiaW5kUGFuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgdGhpcy4kY2hhcnQub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCB7ICdjaGFydCc6IHRoaXMuJGNoYXJ0IH0sIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHVuYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdhdXRvJyk7XG4gICAgICB0aGlzLiRjaGFydC5vZmYoJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCdtb3VzZXVwIHRvdWNoZW5kJywgdGhpcy5wYW5FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVdoZWVsSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBuZXdTY2FsZSAgPSAxICsgKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPiAwID8gLTAuMiA6IDAuMik7XG4gICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgbmV3U2NhbGUpO1xuICAgIH0sXG4gICAgLy9cbiAgICB6b29tU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCB0cnVlKTtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbWluZ0hhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbUVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCBmYWxzZSk7XG4gICAgICAgIHZhciBkaWZmID0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcpIC0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdFN0YXJ0Jyk7XG4gICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAxLjIpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDAuOCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFpvb206IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd3aGVlbCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3RvdWNoc3RhcnQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaG1vdmUnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29taW5nSGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2hlbmQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICB1bmJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3doZWVsJywgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZigndG91Y2hzdGFydCcsIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNobW92ZScsIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaGVuZCcsIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICBnZXRQaW5jaERpc3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSArXG4gICAgICAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzZXRDaGFydFNjYWxlOiBmdW5jdGlvbiAoJGNoYXJ0LCBuZXdTY2FsZSkge1xuICAgICAgdmFyIG9wdHMgPSAkY2hhcnQuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgdmFyIG1hdHJpeCA9ICcnO1xuICAgICAgdmFyIHRhcmdldFNjYWxlID0gMTtcbiAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFszXSkgKiBuZXdTY2FsZSk7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbMV0pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZTNkKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJywgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYnVpbGRKc29uRFM6IGZ1bmN0aW9uICgkbGkpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBzdWJPYmogPSB7XG4gICAgICAgICduYW1lJzogJGxpLmNvbnRlbnRzKCkuZXEoMCkudGV4dCgpLnRyaW0oKSxcbiAgICAgICAgJ3JlbGF0aW9uc2hpcCc6ICgkbGkucGFyZW50KCkucGFyZW50KCkuaXMoJ2xpJykgPyAnMSc6ICcwJykgKyAoJGxpLnNpYmxpbmdzKCdsaScpLmxlbmd0aCA/IDE6IDApICsgKCRsaS5jaGlsZHJlbigndWwnKS5sZW5ndGggPyAxIDogMClcbiAgICAgIH07XG4gICAgICBpZiAoJGxpWzBdLmlkKSB7XG4gICAgICAgIHN1Yk9iai5pZCA9ICRsaVswXS5pZDtcbiAgICAgIH1cbiAgICAgICRsaS5jaGlsZHJlbigndWwnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdGhhdC5hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvL1xuICAgIGxvb3BDaGFydDogZnVuY3Rpb24gKCRjaGFydCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xuICAgICAgdmFyIHN1Yk9iaiA9IHsgJ2lkJzogJHRyLmZpbmQoJy5ub2RlJylbMF0uaWQgfTtcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQubG9vcENoYXJ0KCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuJGNoYXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCF0aGlzLiRjaGFydC5maW5kKCcubm9kZScpWzBdLmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBOb2RlcyBvZiBvcmdoY2FydCB0byBiZSBleHBvcnRlZCBtdXN0IGhhdmUgaWQgYXR0cmlidXRlISc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb29wQ2hhcnQodGhpcy4kY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIHZhciByZWxhdGlvbiA9IHJlbGF0aW9uIHx8ICdzZWxmJztcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy5oaWRkZW4nKSB8fCAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGU7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkdGFyZ2V0WzBdLmNsYXNzTmFtZS5pbmRleE9mKCdzbGlkZS0nKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgfSxcbiAgICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gICAgZ2V0UmVsYXRlZE5vZGVzOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgICBpZiAoISRub2RlIHx8ICEoJG5vZGUgaW5zdGFuY2VvZiAkKSB8fCAhJG5vZGUuaXMoJy5ub2RlJykpIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnBhcmVudCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaGlkZVBhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGV2ZW50LmRhdGEudXBwZXJMZXZlbC5hZGRDbGFzcygnaGlkZGVuJykuc2xpY2UoMSkucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGFuY2VzdG9yIG5vZGUgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVBhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBsaW5lc1xuICAgICAgdmFyICRsaW5lcyA9ICR1cHBlckxldmVsLnNsaWNlKDEpO1xuICAgICAgJGxpbmVzLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIC8vIGhpZGUgdGhlIHN1cGVyaW9yIG5vZGVzIHdpdGggdHJhbnNpdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQpLnZpc2libGUpIHtcbiAgICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndXBwZXJMZXZlbCc6ICR1cHBlckxldmVsIH0sIHRoaXMuaGlkZVBhcmVudEVuZCk7XG4gICAgICB9XG4gICAgICAvLyBpZiB0aGUgY3VycmVudCBub2RlIGhhcyB0aGUgcGFyZW50IG5vZGUsIGhpZGUgaXQgcmVjdXJzaXZlbHlcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50LCAncGFyZW50JykudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJHBhcmVudCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzaG93UGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIHN1cGVyaW9yIGxldmVsXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBsaW5lXG4gICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbigpLnNsaWNlKDEsIC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXG4gICAgICB2YXIgJHBhcmVudCA9ICR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5ub2RlJyk7XG4gICAgICB0aGlzLnJlcGFpbnQoJHBhcmVudFswXSk7XG4gICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUgfSwgdGhpcy5zaG93UGFyZW50RW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlQ2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmIChldmVudC5kYXRhLmlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgIGV2ZW50LmRhdGEubG93ZXJMZXZlbC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC5kYXRhLnZpc2libGVOb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykucmVtb3ZlQXR0cignc3R5bGUnKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAuc2libGluZ3MoJy5ub2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgZXZlbnQuZGF0YS5sb3dlckxldmVsLmxhc3QoKS5maW5kKCcudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oZXZlbnQuZGF0YS5ub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coZXZlbnQuZGF0YS5ub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHN0b3BBamF4OiBmdW5jdGlvbiAoJG5vZGVMZXZlbCkge1xuICAgICAgaWYgKCRub2RlTGV2ZWwuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGVMZXZlbC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGxvd2VyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICB0aGlzLnN0b3BBamF4KCRsb3dlckxldmVsLmxhc3QoKSk7XG4gICAgICB2YXIgJHZpc2libGVOb2RlcyA9ICRsb3dlckxldmVsLmxhc3QoKS5maW5kKCcubm9kZScpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGF0LmdldE5vZGVTdGF0ZSgkKHRoaXMpKS52aXNpYmxlO1xuICAgICAgfSk7XG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbG93ZXJMZXZlbC5sYXN0KCkuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoIWlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgICR2aXNpYmxlTm9kZXMuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgICR2aXNpYmxlTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd2aXNpYmxlTm9kZXMnOiAkdmlzaWJsZU5vZGVzLCAnbG93ZXJMZXZlbCc6ICRsb3dlckxldmVsLCAnaXNWZXJ0aWNhbERlc2MnOiBpc1ZlcnRpY2FsRGVzYywgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLmhpZGVDaGlsZHJlbkVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGxldmVscyA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsZXZlbHMuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICB2YXIgJGRlc2NlbmRhbnRzID0gaXNWZXJ0aWNhbERlc2NcbiAgICAgICAgPyAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZTp2aXNpYmxlJylcbiAgICAgICAgOiAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5lcSgyKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAvLyB0aGUgdHdvIGZvbGxvd2luZyBzdGF0ZW1lbnRzIGFyZSB1c2VkIHRvIGVuZm9yY2UgYnJvd3NlciB0byByZXBhaW50XG4gICAgICB0aGlzLnJlcGFpbnQoJGRlc2NlbmRhbnRzLmdldCgwKSk7XG4gICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJGRlc2NlbmRhbnRzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICBpZiAoJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgIH1cbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNsaWRpbmcnKTtcbiAgICAgIHZhciAkbGluZXMgPSAkYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCcubm9kZXMnKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAkYW5pbWF0ZWROb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJGxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgIHZhciAkc2libGluZ3MgPSBkaXJlY3Rpb24gPyAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCc6bm90KC5oaWRkZW4pJykgOiAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCc6bm90KC5oaWRkZW4pJykpIDogJG5vZGVDb250YWluZXIuc2libGluZ3MoKTtcbiAgICAgICAgJG5vZGVDb250YWluZXIuY2xvc2VzdCgnLm5vZGVzJykucHJldigpLmNoaWxkcmVuKCc6bm90KC5oaWRkZW4pJylcbiAgICAgICAgICAuc2xpY2UoMSwgZGlyZWN0aW9uID8gJHNpYmxpbmdzLmxlbmd0aCAqIDIgKyAxIDogLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGU6Z3QoMCknKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmFkZENsYXNzKCdzbGlkZS11cCcpXG4gICAgICAgICAgLmVuZCgpLmZpbmQoJy5saW5lcywgLm5vZGVzLCAudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgIC5lbmQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93U2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcbiAgICAgIHZhciAkc2libGluZ3MgPSAkKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldkFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnNsaWNlKDAsICRzaWJsaW5ncy5sZW5ndGggKiAyKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcbiAgICAgIGlmICghdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICAgICR1cHBlckxldmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgdmFyIHBhcmVudCA9ICR1cHBlckxldmVsLmZpbmQoJy5ub2RlJylbMF07XG4gICAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xuICAgICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cbiAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmVxKC0xKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGUnKS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBzdGFydExvYWRpbmc6IGZ1bmN0aW9uICgkYXJyb3csICRub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0Jyk7XG4gICAgICBpZiAodHlwZW9mICRjaGFydC5kYXRhKCdpbkFqYXgnKSAhPT0gJ3VuZGVmaW5lZCcgJiYgJGNoYXJ0LmRhdGEoJ2luQWpheCcpID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgJGFycm93LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRub2RlLmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+Jyk7XG4gICAgICAkbm9kZS5jaGlsZHJlbigpLm5vdCgnLnNwaW5uZXInKS5jc3MoJ29wYWNpdHknLCAwLjIpO1xuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIHRydWUpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKG9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyBvcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBlbmRMb2FkaW5nOiBmdW5jdGlvbiAoJGFycm93LCAkbm9kZSwgb3B0aW9ucykge1xuICAgICAgdmFyICRjaGFydCA9ICRub2RlLmNsb3Nlc3QoJ2Rpdi5vcmdjaGFydCcpO1xuICAgICAgJGFycm93LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRub2RlLmZpbmQoJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAkbm9kZS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAkY2hhcnQuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKG9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyBvcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH0sXG4gICAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgICBpc0luQWN0aW9uOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHJldHVybiAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ2ZhLScpID4gLTEgPyB0cnVlIDogZmFsc2U7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaFZlcnRpY2FsQXJyb3c6IGZ1bmN0aW9uICgkYXJyb3cpIHtcbiAgICAgICRhcnJvdy50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc3dpdGNoSG9yaXpvbnRhbEFycm93OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciBvcHRzID0gJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwICYmICh0eXBlb2Ygb3B0cy5hamF4VVJMID09PSAndW5kZWZpbmVkJyB8fCAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcpKSkge1xuICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgaWYgKCRwcmV2U2liLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIGlmICgkbmV4dFNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciAkc2licyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgdmFyIHNpYnNWaXNpYmxlID0gJHNpYnMubGVuZ3RoID8gISRzaWJzLmlzKCcuaGlkZGVuJykgOiBmYWxzZTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICByZXBhaW50OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5vZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBjcmVhdGUgbm9kZVxuICAgIGNyZWF0ZU5vZGU6IGZ1bmN0aW9uIChub2RlRGF0YSwgbGV2ZWwsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGlmICghbm9kZURhdGEuY2hpbGRyZW4pIHsgbm9kZURhdGEuY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgJC5lYWNoKG5vZGVEYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoaW5kZXgsIGNoaWxkKSB7XG4gICAgICAgIGNoaWxkLnBhcmVudElkID0gbm9kZURhdGEuaWQ7XG4gICAgICB9KTtcbiAgICAgIHZhciBkdGQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAvLyBjb25zdHJ1Y3QgdGhlIGNvbnRlbnQgb2Ygbm9kZVxuICAgICAgdmFyICRub2RlRGl2ID0gJCgnPGRpdicgKyAob3B0cy5kcmFnZ2FibGUgPyAnIGRyYWdnYWJsZT1cInRydWVcIicgOiAnJykgKyAobm9kZURhdGFbb3B0cy5ub2RlSWRdID8gJyBpZD1cIicgKyBub2RlRGF0YVtvcHRzLm5vZGVJZF0gKyAnXCInIDogJycpICsgKG5vZGVEYXRhLnBhcmVudElkID8gJyBkYXRhLXBhcmVudD1cIicgKyBub2RlRGF0YS5wYXJlbnRJZCArICdcIicgOiAnJykgKyAnPicpXG4gICAgICAgIC5hZGRDbGFzcygnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyAgKGxldmVsID49IG9wdHMuZGVwdGggPyAnIHNsaWRlLXVwJyA6ICcnKSk7XG4gICAgICBpZiAob3B0cy5ub2RlVGVtcGxhdGUpIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKG9wdHMubm9kZVRlbXBsYXRlKG5vZGVEYXRhKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyBub2RlRGF0YVtvcHRzLm5vZGVUaXRsZV0gKyAnPC9kaXY+JylcbiAgICAgICAgICAuYXBwZW5kKHR5cGVvZiBvcHRzLm5vZGVDb250ZW50ICE9PSAndW5kZWZpbmVkJyA/ICc8ZGl2IGNsYXNzPVwiY29udGVudFwiPicgKyAobm9kZURhdGFbb3B0cy5ub2RlQ29udGVudF0gfHwgJycpICsgJzwvZGl2PicgOiAnJyk7XG4gICAgICB9XG4gICAgICAvLyBhcHBlbmQgNCBkaXJlY3Rpb24gYXJyb3dzIG9yIGV4cGFuZC9jb2xsYXBzZSBidXR0b25zXG4gICAgICB2YXIgZmxhZ3MgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJyc7XG4gICAgICBpZiAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID4gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgIHZhciBpY29uID0gbGV2ZWwgKyAxICA+PSBvcHRzLmRlcHRoID8gJ3BsdXMnIDogJ21pbnVzJztcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwidG9nZ2xlQnRuIGZhIGZhLScgKyBpY29uICsgJy1zcXVhcmVcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChOdW1iZXIoZmxhZ3Muc3Vic3RyKDAsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigxLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT4nICtcbiAgICAgICAgICAgICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJG5vZGVEaXYub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciAkbm9kZSA9ICQodGhpcyksIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgdmFyICR0b3BFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJyk7XG4gICAgICAgIHZhciAkcmlnaHRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKTtcbiAgICAgICAgdmFyICRib3R0b21FZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJyk7XG4gICAgICAgIHZhciAkbGVmdEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJyk7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2VlbnRlcicpIHtcbiAgICAgICAgICBpZiAoJHRvcEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbGFnID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlO1xuICAgICAgICAgICAgJHRvcEVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJGJvdHRvbUVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbGFnID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpLnZpc2libGU7XG4gICAgICAgICAgICAkYm90dG9tRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgkbGVmdEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXJcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZmluZCgnLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSB0b3AgZWRnZVxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b3BFZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgcGFyZW50U3RhdGUgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpO1xuICAgICAgICBpZiAocGFyZW50U3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgICBpZiAoJHBhcmVudC5pcygnLnNsaWRpbmcnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICAvLyBoaWRlIHRoZSBhbmNlc3RvciBub2RlcyBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgICAgICBpZiAocGFyZW50U3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgdGhhdC5oaWRlUGFyZW50KCRub2RlKTtcbiAgICAgICAgICAgICRwYXJlbnQub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCR0aGF0KTtcbiAgICAgICAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGFuY2VzdG9ycyBhbmQgc2libGluZ3NcbiAgICAgICAgICAgIHRoYXQuc2hvd1BhcmVudCgkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGxvYWQgdGhlIG5ldyBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICR0aGF0LnBhcmVudCgpWzBdLmlkO1xuICAgICAgICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzXG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAvLyBsb2FkIG5ldyBub2Rlc1xuICAgICAgICAgICAgJC5hamF4KHsgJ3VybCc6ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwucGFyZW50KSA/IG9wdHMuYWpheFVSTC5wYXJlbnQobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnBhcmVudCArIG5vZGVJZCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgIGlmICgkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnKSkge1xuICAgICAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudCgkbm9kZSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IHBhcmVudCBub2RlIGRhdGEnKTsgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7IHRoYXQuZW5kTG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpOyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBiaW5kIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBib3R0b20gZWRnZVxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5ib3R0b21FZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgY2hpbGRyZW5TdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKTtcbiAgICAgICAgaWYgKGNoaWxkcmVuU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJGNoaWxkcmVuID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmxhc3QnKTtcbiAgICAgICAgICBpZiAoJGNoaWxkcmVuLmZpbmQoJy5ub2RlOnZpc2libGUnKS5pcygnLnNsaWRpbmcnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoYXQuaGlkZUNoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gKyBub2RlSWQsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKCRub2RlLCBkYXRhLCAkLmV4dGVuZCh7fSwgb3B0cywgeyBkZXB0aDogMCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IGNoaWxkcmVuIG5vZGVzIGRhdGEnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHRvZ2dsZSBidXR0b25zIGluIEh5YnJpZChob3Jpem9udGFsICsgdmVydGljYWwpIE9yZ0NoYXJ0XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvZ2dsZUJ0bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkZGVzY1dyYXBwZXIgPSAkdGhpcy5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIHZhciAkZGVzY2VuZGFudHMgPSAkZGVzY1dyYXBwZXIuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRkZXNjV3JhcHBlci5jaGlsZHJlbigpLmNoaWxkcmVuKCcubm9kZScpO1xuICAgICAgICBpZiAoJGNoaWxkcmVuLmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxuICAgICAgICAkdGhpcy50b2dnbGVDbGFzcygnZmEtcGx1cy1zcXVhcmUgZmEtbWludXMtc3F1YXJlJyk7XG4gICAgICAgIGlmICgkZGVzY2VuZGFudHMuZXEoMCkuaXMoJy5zbGlkZS11cCcpKSB7XG4gICAgICAgICAgJGRlc2NXcmFwcGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0LnJlcGFpbnQoJGNoaWxkcmVuLmdldCgwKSk7XG4gICAgICAgICAgJGNoaWxkcmVuLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkY2hpbGRyZW4ucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICAgICAgLy8gJGRlc2NXcmFwcGVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuZmluZCgnLnRvZ2dsZUJ0bicpLnJlbW92ZUNsYXNzKCdmYS1taW51cy1zcXVhcmUnKS5hZGRDbGFzcygnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmxlZnRFZGdlLCAucmlnaHRFZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgc2libGluZ3NTdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKTtcbiAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICAgIGlmICgkc2libGluZ3MuZmluZCgnLm5vZGU6dmlzaWJsZScpLmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxuICAgICAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCkge1xuICAgICAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgICAgIGlmICgkdGhhdC5pcygnLmxlZnRFZGdlJykpIHtcbiAgICAgICAgICAgICAgaWYgKCRwcmV2U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhhdC5oaWRlU2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhhdC5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBsb2FkIHRoZSBuZXcgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICR0aGF0LnBhcmVudCgpWzBdLmlkO1xuICAgICAgICAgIHZhciB1cmwgPSAodGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS5leGlzdCkgP1xuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuc2libGluZ3MpID8gb3B0cy5hamF4VVJMLnNpYmxpbmdzKG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuZmFtaWxpZXMpID8gb3B0cy5hamF4VVJMLmZhbWlsaWVzKG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiB1cmwsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2libGluZ3MgfHwgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRTaWJsaW5ncygkbm9kZSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IHNpYmxpbmcgbm9kZXMgZGF0YScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoYXQuZW5kTG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICAkbm9kZURpdi5vbignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXIgb3JpZ0V2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2h0bWwnLCAnaGFjayBmb3IgZmlyZWZveCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpZiB1c2VycyBlbmFibGUgem9vbSBvciBkaXJlY3Rpb24gb3B0aW9uc1xuICAgICAgICAgIGlmICgkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHZhciBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdob3N0LW5vZGUnKSkge1xuICAgICAgICAgICAgICBnaG9zdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlLmNsYXNzTGlzdC5hZGQoJ2dob3N0LW5vZGUnKTtcbiAgICAgICAgICAgICAgbm9kZUNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ3JlY3QnKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlLmFwcGVuZENoaWxkKG5vZGVDb3Zlcik7XG4gICAgICAgICAgICAgICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmFwcGVuZChnaG9zdE5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY2hpbGRyZW4oJy5naG9zdC1ub2RlJykuZ2V0KDApO1xuICAgICAgICAgICAgICBub2RlQ292ZXIgPSAkKGdob3N0Tm9kZSkuY2hpbGRyZW4oKS5nZXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNWYWx1ZXMgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdCgob3B0cy5kaXJlY3Rpb24gPT09ICd0MmInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0JykgPyB0cmFuc1ZhbHVlc1swXS5zbGljZSh0cmFuc1ZhbHVlc1swXS5pbmRleE9mKCcoJykgKyAxKSA6IHRyYW5zVmFsdWVzWzFdKSk7XG4gICAgICAgICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpKTtcbiAgICAgICAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd4Jyw1ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneScsNSAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeCcsIDQgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xuICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnbDJyJykge1xuICAgICAgICAgICAgICB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAncjJsJykge1xuICAgICAgICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRmlyZWZveCkgeyAvLyBoYWNrIGZvciBvbGQgdmVyc2lvbiBvZiBGaXJlZm94KDwgNDguMClcbiAgICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcbiAgICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3JnYigxOTEsIDAsIDApJyk7XG4gICAgICAgICAgICAgIHZhciBnaG9zdE5vZGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZVdyYXBwZXIuc3JjID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCcgKyAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoZ2hvc3ROb2RlKTtcbiAgICAgICAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlV3JhcHBlciwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGUsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgJGRyYWdnZWQgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgICAgdmFyICRkcmFnSGllciA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgICAkZHJhZ2dlZC5jbG9zZXN0KCcub3JnY2hhcnQnKVxuICAgICAgICAgICAgLmRhdGEoJ2RyYWdnZWQnLCAkZHJhZ2dlZClcbiAgICAgICAgICAgIC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIG5vZGUpIHtcbiAgICAgICAgICAgICAgaWYgKCRkcmFnSGllci5pbmRleChub2RlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSgkZHJhZ2dlZCwgJGRyYWdab25lLCAkKG5vZGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKCEkKHRoaXMpLmlzKCcuYWxsb3dlZERyb3AnKSkge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3JnY2hhcnQnKS5maW5kKCcuYWxsb3dlZERyb3AnKS5yZW1vdmVDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXIgJGRyb3Bab25lID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgJG9yZ2NoYXJ0ID0gJGRyb3Bab25lLmNsb3Nlc3QoJy5vcmdjaGFydCcpO1xuICAgICAgICAgIHZhciAkZHJhZ2dlZCA9ICRvcmdjaGFydC5kYXRhKCdkcmFnZ2VkJyk7XG4gICAgICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuY2hpbGRyZW4oKTtcbiAgICAgICAgICB2YXIgZHJvcEV2ZW50ID0gJC5FdmVudCgnbm9kZWRyb3Aub3JnY2hhcnQnKTtcbiAgICAgICAgICAkb3JnY2hhcnQudHJpZ2dlcihkcm9wRXZlbnQsIHsgJ2RyYWdnZWROb2RlJzogJGRyYWdnZWQsICdkcmFnWm9uZSc6ICRkcmFnWm9uZS5jaGlsZHJlbigpLCAnZHJvcFpvbmUnOiAkZHJvcFpvbmUgfSk7XG4gICAgICAgICAgaWYgKGRyb3BFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBmaXJzdGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcm9wIHpvbmVcbiAgICAgICAgICBpZiAoISRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkubGVuZ3RoKSB7IC8vIGlmIHRoZSBkcm9wIHpvbmUgaXMgYSBsZWFmIG5vZGVcbiAgICAgICAgICAgICRkcm9wWm9uZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgICAgICAucGFyZW50KCkuYXR0cignY29sc3BhbicsIDIpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5hZnRlcignPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+J1xuICAgICAgICAgICAgICArICc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPjwvdHI+J1xuICAgICAgICAgICAgICArICc8dHIgY2xhc3M9XCJub2Rlc1wiPjwvdHI+JylcbiAgICAgICAgICAgICAgLnNpYmxpbmdzKCc6bGFzdCcpLmFwcGVuZCgkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKS5lbmQoKS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRyb3BDb2xzcGFuID0gcGFyc2VJbnQoJGRyb3Bab25lLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nKSkgKyAyO1xuICAgICAgICAgICAgdmFyIGhvcml6b250YWxFZGdlcyA9ICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nO1xuICAgICAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykubmV4dCgpLmFkZEJhY2soKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XG4gICAgICAgICAgICBpZiAoISRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAkZHJhZ2dlZC5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMSkuY2hpbGRyZW4oJzpsYXN0JykuYmVmb3JlKCc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JylcbiAgICAgICAgICAgICAgLmVuZCgpLm5leHQoKS5hcHBlbmQoJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XG4gICAgICAgICAgICB2YXIgJGRyb3BTaWJzID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgICAgICBpZiAoJGRyb3BTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAkZHJvcFNpYnMuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcbiAgICAgICAgICB2YXIgZHJhZ0NvbHNwYW4gPSBwYXJzZUludCgkZHJhZ1pvbmUuYXR0cignY29sc3BhbicpKTtcbiAgICAgICAgICBpZiAoZHJhZ0NvbHNwYW4gPiAyKSB7XG4gICAgICAgICAgICAkZHJhZ1pvbmUuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAgICAgLnBhcmVudCgpLm5leHQoKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXG4gICAgICAgICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oKS5zbGljZSgxLCAzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciAkZHJhZ1NpYnMgPSAkZHJhZ1pvbmUucGFyZW50KCkuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICgkZHJhZ1NpYnMubGVuZ3RoID09PTEpIHtcbiAgICAgICAgICAgICAgJGRyYWdTaWJzLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkZHJhZ1pvbmUucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xuICAgICAgICBvcHRzLmNyZWF0ZU5vZGUoJG5vZGVEaXYsIG5vZGVEYXRhKTtcbiAgICAgIH1cbiAgICAgIGR0ZC5yZXNvbHZlKCRub2RlRGl2KTtcbiAgICAgIHJldHVybiBkdGQucHJvbWlzZSgpO1xuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgYnVpbGQgdGhlIHRyZWVcbiAgICBidWlsZEhpZXJhcmNoeTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIGxldmVsLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlV3JhcHBlcjtcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgbm9kZVxuICAgICAgdmFyICRjaGlsZE5vZGVzID0gbm9kZURhdGEuY2hpbGRyZW47XG4gICAgICB2YXIgaGFzQ2hpbGRyZW4gPSAkY2hpbGROb2RlcyA/ICRjaGlsZE5vZGVzLmxlbmd0aCA6IGZhbHNlO1xuICAgICAgdmFyIGlzVmVydGljYWxOb2RlID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXG4gICAgICAgICRub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gJGFwcGVuZFRvIDogJCgnPHRhYmxlPicpO1xuICAgICAgICBpZiAoIWlzVmVydGljYWxOb2RlKSB7XG4gICAgICAgICAgJGFwcGVuZFRvLmFwcGVuZCgkbm9kZVdyYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIGxldmVsLCBvcHRzKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVEaXYpO1xuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVEaXYud3JhcCgnPHRyPjx0ZCcgKyAoaGFzQ2hpbGRyZW4gPyAnIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIicgOiAnJykgKyAnPjwvdGQ+PC90cj4nKS5jbG9zZXN0KCd0cicpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdCBub2RlJylcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIGluZmVyaW9yIG5vZGVzIGFuZCBjb25uZWN0aW9uZyBsaW5lc1xuICAgICAgaWYgKGhhc0NoaWxkcmVuKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcbiAgICAgICAgICAkbm9kZVdyYXBwZXIgPSAkYXBwZW5kVG87XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzSGlkZGVuID0gKGxldmVsICsgMSA+PSBvcHRzLmRlcHRoIHx8IG5vZGVEYXRhLmNvbGxhcHNlZCkgPyAnIGhpZGRlbicgOiAnJztcbiAgICAgICAgdmFyIGlzVmVydGljYWxMYXllciA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXG4gICAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgdmFyIGxpbmVMYXllciA9ICc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgIGZvciAodmFyIGk9MTsgaTwkY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgIH1cbiAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+PC90cj4nO1xuICAgICAgICB2YXIgJG5vZGVMYXllcjtcbiAgICAgICAgaWYgKGlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dWw+Jyk7XG4gICAgICAgICAgaWYgKGlzSGlkZGVuKSB7XG4gICAgICAgICAgICAkbm9kZUxheWVyLmFkZENsYXNzKGlzSGlkZGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxldmVsICsgMiA9PT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJ2ZXJ0aWNhbE5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZD48L3RkPjwvdHI+JylcbiAgICAgICAgICAgICAgLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuY2hpbGRyZW4oKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dHIgY2xhc3M9XCJub2RlcycgKyBpc0hpZGRlbiArICdcIj4nKTtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKGxpbmVMYXllcikuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xuICAgICAgICAkLmVhY2goJGNoaWxkTm9kZXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciAkbm9kZUNlbGwgPSBpc1ZlcnRpY2FsTGF5ZXIgPyAkKCc8bGk+JykgOiAkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKTtcbiAgICAgICAgICAkbm9kZUxheWVyLmFwcGVuZCgkbm9kZUNlbGwpO1xuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJG5vZGVDZWxsLCB0aGlzLCBsZXZlbCArIDEsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgY2hpbGQgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkQ2hpbGROb2RlOiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkYXBwZW5kVG8uY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGRhdGEgPSBub2RlRGF0YS5jaGlsZHJlbiB8fCBub2RlRGF0YS5zaWJsaW5ncztcbiAgICAgICRhcHBlbmRUby5maW5kKCd0ZDpmaXJzdCcpLmF0dHIoJ2NvbHNwYW4nLCBkYXRhLmxlbmd0aCAqIDIpO1xuICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkYXBwZW5kVG8sIHsgJ2NoaWxkcmVuJzogZGF0YSB9LCAwLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZENoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISRub2RlLmZpbmQoJy5zeW1ib2wnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGF0LnNob3dDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHBhcmVudCBub2RlIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFBhcmVudE5vZGU6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0YWJsZSA9ICQoJzx0YWJsZT4nKTtcbiAgICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnMDAxJztcbiAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIDAsIG9wdHMgfHwgJGN1cnJlbnRSb290LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKSkpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgkbm9kZURpdi5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpLndyYXAoJzx0ciBjbGFzcz1cImhpZGRlblwiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKS5jbG9zZXN0KCd0cicpKTtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgICAgdmFyIGxpbmVzUm93ID0gJzx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+JyArIGxpbmVzUm93ICsgJzwvdHI+Jyk7XG4gICAgICAgICAgdmFyICRjaGFydCA9IHRoYXQuJGNoYXJ0O1xuICAgICAgICAgICRjaGFydC5wcmVwZW5kKCR0YWJsZSlcbiAgICAgICAgICAgIC5jaGlsZHJlbigndGFibGU6Zmlyc3QnKS5hcHBlbmQoJzx0ciBjbGFzcz1cIm5vZGVzXCI+PHRkIGNvbHNwYW49XCIyXCI+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigpLmFwcGVuZCgkY2hhcnQuY2hpbGRyZW4oJ3RhYmxlJykubGFzdCgpKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBwYXJlbnQgbm9kZScpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkUGFyZW50OiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkUGFyZW50Tm9kZSgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRvcEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50aXRsZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93UGFyZW50KCRjdXJyZW50Um9vdCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHN1YnNlcXVlbnQgcHJvY2Vzc2luZyBvZiBidWlsZCBzaWJsaW5nIG5vZGVzXG4gICAgY29tcGxlbWVudExpbmU6IGZ1bmN0aW9uICgkb25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XG4gICAgICB2YXIgbGluZXMgPSAnJztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhpc3RpbmdTaWJsaWdDb3VudDsgaSsrKSB7XG4gICAgICAgIGxpbmVzICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgIH1cbiAgICAgICRvbmVTaWJsaW5nLnBhcmVudCgpLnByZXZBbGwoJ3RyOmd0KDApJykuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgc2libGluZ0NvdW50ICogMilcbiAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbignOmZpcnN0JykuYWZ0ZXIobGluZXMpO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkU2libGluZ05vZGU6IGZ1bmN0aW9uICgkbm9kZUNoYXJ0LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBleGlzdGluZ1NpYmxpZ0NvdW50ID0gJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSA/ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5jaGlsZHJlbigpLmxlbmd0aCA6IDE7XG4gICAgICB2YXIgc2libGluZ0NvdW50ID0gZXhpc3RpbmdTaWJsaWdDb3VudCArIG5ld1NpYmxpbmdDb3VudDtcbiAgICAgIHZhciBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQvMiAtIDEpIDogMDtcbiAgICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXG4gICAgICBpZiAoJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSkge1xuICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsYXN0Jyk7XG4gICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICB2YXIgY2hpbGRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLCBub2RlRGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB2YXIgJHNpYmxpbmdUZHMgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJykuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigndGQnKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKDApLmJlZm9yZSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykuc2libGluZ3MoKS5hZGRCYWNrKCkudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5ub3QoJzplcSgnICsgaW5zZXJ0UG9zdGlvbiArIDEgKyAnKScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcbiAgICAgICAgdmFyIG5vZGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKSwgbm9kZURhdGEsIDAsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK25vZGVDb3VudCA9PT0gc2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRub2RlQ2hhcnQubmV4dCgpLmNoaWxkcmVuKCd0cjpsYXN0JylcbiAgICAgICAgICAgICAgLmNoaWxkcmVuKCkuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJCgnPHRkIGNvbHNwYW49XCIyXCI+JylcbiAgICAgICAgICAgICAgLmFwcGVuZCgkbm9kZUNoYXJ0KSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgwKS5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5wYXJlbnQoKS5zaWJsaW5ncygpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBhZGRTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkU2libGluZ05vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLmRhdGEoJ3NpYmxpbmdzTG9hZGVkJywgdHJ1ZSk7XG4gICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcmVtb3ZlTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xuICAgICAgdmFyICRzaWJzID0gJHBhcmVudC5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCRwYXJlbnQuaXMoJ3RkJykpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS5leGlzdCkge1xuICAgICAgICAgICRzaWJzLmVxKDIpLmNoaWxkcmVuKCcudG9wTGluZTpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICAgICRzaWJzLnNsaWNlKDAsIDIpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsICRzaWJzLmVxKDIpLmNoaWxkcmVuKCkubGVuZ3RoKTtcbiAgICAgICAgICAkcGFyZW50LnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJzLmVxKDApLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgICAuZmluZCgnLmJvdHRvbUVkZ2UnKS5yZW1vdmUoKVxuICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRwYXJlbnQuYWRkKCRwYXJlbnQuc2libGluZ3MoKSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGV4cG9ydDogZnVuY3Rpb24gKGV4cG9ydEZpbGVuYW1lLCBleHBvcnRGaWxlZXh0ZW5zaW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBleHBvcnRGaWxlbmFtZSA9ICh0eXBlb2YgZXhwb3J0RmlsZW5hbWUgIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlbmFtZSA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlbmFtZTtcbiAgICAgIGV4cG9ydEZpbGVleHRlbnNpb24gPSAodHlwZW9mIGV4cG9ydEZpbGVleHRlbnNpb24gIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlZXh0ZW5zaW9uIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVleHRlbnNpb247XG4gICAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgdmFyICRtYXNrID0gJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJyk7XG4gICAgICBpZiAoISRtYXNrLmxlbmd0aCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibWFza1wiPjxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPjwvZGl2PicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG1hc2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgdmFyIHNvdXJjZUNoYXJ0ID0gJGNoYXJ0Q29udGFpbmVyLmFkZENsYXNzKCdjYW52YXNDb250YWluZXInKS5maW5kKCcub3JnY2hhcnQ6dmlzaWJsZScpLmdldCgwKTtcbiAgICAgIHZhciBmbGFnID0gdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2wycicgfHwgdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3IybCc7XG4gICAgICBodG1sMmNhbnZhcyhzb3VyY2VDaGFydCwge1xuICAgICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXG4gICAgICAgICdoZWlnaHQnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50V2lkdGggOiBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQsXG4gICAgICAgICdvbmNsb25lJzogZnVuY3Rpb24gKGNsb25lRG9jKSB7XG4gICAgICAgICAgJChjbG9uZURvYykuZmluZCgnLmNhbnZhc0NvbnRhaW5lcicpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpXG4gICAgICAgICAgICAuZmluZCgnLm9yZ2NoYXJ0OnZpc2libGU6Zmlyc3QnKS5jc3MoJ3RyYW5zZm9ybScsICcnKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ29ucmVuZGVyZWQnOiBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIGlmIChleHBvcnRGaWxlZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdwZGYnKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0ge307XG4gICAgICAgICAgICB2YXIgZG9jV2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy53aWR0aCAqIDAuMjY0Nik7XG4gICAgICAgICAgICB2YXIgZG9jSGVpZ2h0ID0gTWF0aC5mbG9vcihjYW52YXMuaGVpZ2h0ICogMC4yNjQ2KTtcbiAgICAgICAgICAgIGlmIChkb2NXaWR0aCA+IGRvY0hlaWdodCkge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ2wnLCAnbW0nLCBbZG9jV2lkdGgsIGRvY0hlaWdodF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgW2RvY0hlaWdodCwgZG9jV2lkdGhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvYy5hZGRJbWFnZShjYW52YXMudG9EYXRhVVJMKCksICdwbmcnLCAwLCAwKTtcbiAgICAgICAgICAgIGRvYy5zYXZlKGV4cG9ydEZpbGVuYW1lICsgJy5wZGYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGlzV2Via2l0ID0gJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgICAgIHZhciBpc0ZmID0gISF3aW5kb3cuc2lkZWJhcjtcbiAgICAgICAgICAgIHZhciBpc0VkZ2UgPSBuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgfHwgKG5hdmlnYXRvci5hcHBOYW1lID09PSBcIk5ldHNjYXBlXCIgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignRWRnZScpID4gLTEpO1xuXG4gICAgICAgICAgICBpZiAoKCFpc1dlYmtpdCAmJiAhaXNGZikgfHwgaXNFZGdlKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlQmxvYihjYW52YXMubXNUb0Jsb2IoKSwgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5vYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpO1xuICAgICAgICAgICAgICBpZiAoISRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8YSBjbGFzcz1cIm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAnXCInXG4gICAgICAgICAgICAgICAgICArICcgZG93bmxvYWQ9XCInICsgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZ1wiPjwvYT4nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikuYXR0cignaHJlZicsIGNhbnZhcy50b0RhdGFVUkwoKSlbMF0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJC5mbi5vcmdjaGFydCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBPcmdDaGFydCh0aGlzLCBvcHRzKS5pbml0KCk7XG4gIH07XG5cbn0pKTtcbiJdfQ==
